Time: 2026-01-15 20:23 CST
Author: Codex (GPT-5)

Summary:
- Added a right-panel "Edit Anatomy" button in the anatomy explorer graph and opened the existing AnatomyEditor in a modal.
- Loaded full anatomy node data for the editor via GraphQL when the modal opens.
- Updated AnatomyEditor to accept an optional onClose callback so it can close the modal after save or cancel.

Files touched:
- components/AnatomyExplorerGraph.tsx
- components/AnatomyEditor.tsx

---

Time: 2026-01-15 (later)
Author: Claude Opus 4.5

## Session 1: Exercise Aggregation in Anatomy Explorer
- Made child exercises bubble up to parent anatomy nodes
- Added filter tags at top of exercise grid to filter by source muscle
- Added source badges on exercise cards (bottom overlay, above type badge)
- Clicking exercises now opens ExerciseDrawer sidebar
- Tree shows "15 ex (59 total)" format for direct vs aggregated counts

Files:
- app/anatomy-explorer/page.tsx (aggregation logic)
- components/AggregatedExerciseGrid.tsx (NEW - filterable grid)
- components/AnatomyExplorerGraph.tsx (drawer integration)
- components/AnatomyExplorerTree.tsx (totalExerciseCount display)

## Session 2: Guide Reorganization Scripts
Reorganized all 5 muscle guides from flat sections to hierarchical structure:
- Back: 18 → 18 sections (8 anatomy subsections) [manual by user]
- Shoulders: 48 → 16 sections (5 anatomy subsections)
- Chest: 49 → 15 sections (3 anatomy subsections)
- Legs: 66 → 17 sections (7 anatomy subsections)
- Arms: 51 → 14 sections (4 anatomy subsections)

Total: 232 → 80 sections (65% reduction)

Scripts created:
- prisma/scripts/fetch-guide.ts (view guide structure)
- prisma/scripts/reorganize-shoulders.ts
- prisma/scripts/reorganize-chest.ts
- prisma/scripts/reorganize-legs.ts
- prisma/scripts/reorganize-arms.ts

## Session 3: Guide Navigation UI
Added section navigation sidebar for guides:
- Desktop: Left sidebar (240px) with expandable section hierarchy
- Mobile: Collapsible bottom sheet with section list
- Current section highlighted, parent auto-expanded
- Removed dot pagination (sidebar replaces it)

Files:
- components/GuideSectionNav.tsx (NEW - shared nav component)
- components/GuideMobileSheet.tsx (NEW - mobile bottom sheet)
- components/GuidePaginatedView.tsx (integrated sidebar + sheet)

## Session 4: Guide Design Improvements (Typography + Basics)
Made guide view more readable and visually engaging:

Typography:
- Larger, bolder headings with tracking-tight
- Better spacing between elements (mt-10, mt-8, etc.)
- Improved paragraph line-height and color (text-gray-700)

Section styling:
- Color-coded kind badges (teal=anatomy, purple=mindset, orange=program, blue=intro)
- Bolder section titles with tracking

Images:
- Rounded corners (rounded-xl) with subtle shadow
- Smart grid sizing (1/2/3 columns based on image count)
- Subtle hover zoom effect

Sidebar:
- Progress bar at top with percentage
- "Section X of Y" indicator
- Color dots for each section type

Files:
- components/MentionRenderer.tsx (typography updates)
- components/GuidePaginatedView.tsx (section + image styling)
- components/GuideSectionNav.tsx (progress bar + kind colors)

Also:
- Made subsections display compact (inline links instead of bulky cards)

## Session 5: Raw Guide Imports for Comparison
Added `--raw` flag to import script to import original PDF exports as separate guides without overwriting the reorganized versions.

Purpose: Compare reorganized guides against raw imports to check for missing content.

Import results:
| Guide | Raw Import | Reorganized |
|-------|-----------|-------------|
| back-raw | 53 sections | back: 18 |
| arms-raw | 52 sections | arms: 14 |
| chest-raw | 44 sections | chest: 15 |
| shoulders-raw | 54 sections | shoulders: 16 |
| legs-raw | 66 sections | legs: 17 |

Files:
- prisma/import-raw-guide.ts (added --raw flag support)

Usage:
```bash
bun run prisma/import-raw-guide.ts back --raw
```

Now both versions accessible:
- /guides/back (reorganized)
- /guides/back-raw (raw import)
